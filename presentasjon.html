<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv='content-type' content='text/html; charset=utf-8' />
    <title>Introduksjon til JavaScript</title>
    <link href='node_modules/remark-bekk/dist/bekk.css' type='text/css' rel='stylesheet'>
    
    <style type='text/css' media='screen'>

      .jquery { background-color: #1E2837; }

    </style>
  </head>
  <body>
    <textarea id='source'>

class: front-page

# Dagskurs i JavaScript
## En introduksjon til språket

Erik Wendel
03/08/2016

---

class: middle center
.card[
.picture[
  ![Erik](bilder/rsz_erik.jpg)
]
.name[Erik Wendel]
.title[Faggruppeleder]
.department[Technology]
.phone[416 972 26]
.email[erik.wendel@bekk.no]
]

---

class: middle split

![Javascript](https://raw.githubusercontent.com/ewendel/frontend--bilder/master/javascript.png)

## JavaScript er ...

--

ikke Java

--

vanvittig populært

--

svært nevenyttig

--

fullt av bugs

---

class: agenda

# Dagens agenda

* bakgrunn og historie
* gjenomgang av språket
* kodeoppgaver

---

class: stretch
background-image: url(bilder/time-machine.jpg)

--

class: middle, center
## 1995

---

# 1995

Brendan Eich blir ansatt for å lage et programmeringsspråk til Netscape Navigator Beta 2.0
(les mer om dette)

---

class: split

.left[![](bilder/explorer.jpg)]
.right[![Right-aligned image](bilder/navigator2.png)]

---

# ECMAScript 1.0
Juni 1997

---

class: middle center

HTML beskriver hva innholdet er.

CSS beskriver hvordan innholdet ser ut.

Men hva hvis vi trenger dynamisk oppførsel?

???

For å ta en kort recap: 

( les opp )


---

class: center

![Javascript](https://raw.githubusercontent.com/ewendel/frontend--bilder/master/javascript.png)

???

Det er her JS kommer inn.
Weben har gått fra å levere statiske dokumenter til å bli verdens største, distribuerte applikasjonsplattform.
Det merkes.
JS er ikke egentlig laget for å skrive svære apps, men med tiden har man fått crowbaret til inn på en sjarmerende måte.

For å ta litt historie:
JS ble skrevet av Brendan Eich da han jobbet for Netscape (som laget NN) i 1995.
På ti dager. Hvorfor? Fordi de sloss mot IE, som hadde sitt eget VBscript og senere JScript, som var en kopi av JavaScript.

JS var for viktig til å legge dets utviklings i hendene til to rivaliserende teknologiselskapet, så de sendte inn JS til et selskap som drev med standarder og het ECMA. Dermed var ECMAScript født, som er standarden dagens JavaScript-implementasjone er basert på.
Som med HTML-tags, HTML5 features og CSS-properties er man avhengig av at nettleserne selv implementerer og støtter standerden, slik at også her finnes plenty forskjeller mellom nettleserne.

---

class: fullscreen

![Google instant search](https://raw.githubusercontent.com/ewendel/frontend--bilder/master/google.png)

---

class: fullscreen

![Google Maps](https://raw.githubusercontent.com/ewendel/frontend--bilder/master/googlemaps.png)

---

class: middle center

#[Car visualization with Three.js](http://www.carvisualizer.plus360degrees.com/threejs/)

---

class: middle center

#[BananaBread](https://developer.mozilla.org/en-US/demos/detail/bananabread)

---

class: middle center

JavaScript er et programmeringspråk

---

class: middle center

 ... men det har ingenting med Java å gjøre.

---

class: middle center

# JavaScript vs Java

&nbsp;
&nbsp;
&nbsp;

 Dynamisk vs kompilert språk

 Dynamisk vs statisk typing

 Prototypebasert vs klassebasert arv

---

class: agenda

# Dagens pensum

* data og typer
* objekter
* arrays
* funksjoner
* arv og prototyper
* standardbibliotek: Date, Math, Array, String
* ES6: spread, rest, default params, classes, modules (ES6)

---

class: middle center

# Show me some code!

???

Okei, nok bakgrunnspreik. Det vi skal gjøre nå er å ha en teknisk og syntaxmessig gjennom av JavaScript.
Dette er delt opp i bolker, og på slutten av hver bolk vil det være praktiske oppgaver.

Dersom noen aldri har vært noe borti JS fra før, og kanskje heller ikke andre dynamiske språk, kan dette være serious brainfuck.
SPØR OM HJELP DERSOM NOE ER VANSKELIG! Serr!

---

# Typer i JavaScript

    Number
    Boolean
    String
    Object
    Symbol
    Function
--
    undefined
--
    null
--
    Array
--
    Date
--
    RegExp


---

# Typer i JavaScript

    Number
    Boolean
    String
    Symbol
    Object
        Function
        Array
        Date
        RegExp
    null
    undefined

---



# Variabler, objekter og datatyper

Variabler er typeløse i JS

```javascript
var errorText = "Det har oppstått en feil"; // String
var successText = 'Hurra! Alt gikk bra.'; // String
```
--
```javascript
var loggedIn = true; // Boolean
```
--
```javascript
var authLevel = 2; Number (heltall)
```
--
```javascript
var interestRate = 2.5; // Number (flyttall)
```
--
```javascript
interestRate = false; // endre type
```
--
```javascript
var serviceList = []; // array
```

---

class: middle center

# Nytt i ECMAScript6

```javascript
var
let 
const
```

_Kortversjon: alltid const!_

---

# Variabler, objekter og datatyper

```javascript
const errorText = "Det har oppstått en feil"; // String
const successText = 'Hurra! Alt gikk bra.'; // String

let loggedIn = true; // Boolean

let authLevel = 2; Number (heltall)

const interestRate = 2.5; // Number (flyttall)

const serviceList = []; // array
```

---

class: middle center

# Number

```javascript
const age = 29;
const PI = 3.14;
```

_"double-precision 64-bit format IEEE 754 values"_ 

---

class: middle center

# Number

```javascript
0.1 + 0.2 = ?
```

---

class: middle center

# Number

```javascript
0.1 + 0.2 = 0.30000000000000004
```

???

Troll? :D

---

class: middle center

# Number

```javascript
Math.sin(3.5);
Math.PI * (r + r);
parseInt('1852', 10);
parseInt(true) === NaN
true === isNaN(NaN)
1 / 0 = Infinity
-1 / 0 = -Infinity
```

---

class: middle center

# Boolean

```javascript
true
false
```
--
```javascript
(true || false) && false
```
--
```javascript
Boolean('true') // true
Boolean(0) // false
```

---

class: middle center

# Boolean

```javascript
false
null
undefined
0
''
someObject.namee
```
_falsy values_

---

class: middle center

# Boolean

```javascript
if (0) { ...}
```
--
```javascript
if (listOfStuff.length) { ...}
```
--
```javascript
if (person.name) { ...}
// felle! tom streng er falsy
```
---

class: middle center

# String

```javascript
"dobbeltfnutter er lov"
'men bruk helst enkeltfnutter'
// char finnes ikke
```
--
```javascript
'hello'.length; // 5
'hello'.charAt(0); // 'h'
'hello, world'.replace('hello', 'goodbye'); // 'goodbye, world'
'hello'.toUpperCase(); // 'HELLO'
```
--
```javascript
'hello'.split(''); // ['h', 'e', 'l', 'l', 'o']
'hello world'.split('lo'); // ['hel', ' world']
```
---

class: middle center

# Symbol

```javascript
const COLOR_RED = Symbol('red');
COLOR_RED; // Symbol(red);
Symbol('red') === Symbol('red'); // false
```
_Brand new!_

---

class: middle center

# null & undefined

--

##### null
_a value that indicates a deliberate non-value_

##### undefined
_indicates an uninitialized value — that is, a value hasn't even been assigned yet_

---

class: middle center

# null & undefined

```javascript
let user = null; // loaded asynchronously

config.nonExistantProperty // undefined
```

---

class: middle center

# Object

.. like hashmaps

```javascript
Map<String, String> myMap = new HashMap<String, String>();
```

---

# Object

```javascript
const object = {};

const BEKK = {
    age: '16',
    employees: 400
};

BEKK.age;               // '16'
BEKK['employees'];      // 400
BEKK.key3;              // undefined

delete BEKK.age;
BEKK.age;               // undefined
```
_note the commas_

---

# Object

```javascript

const BEKK = {
    tech: {
        boss: 'Jobi "Drammen" Birkeland
    },
    doWork: function() { ... }
};

BEKK.doWork(); // Call the method
BEKK.tech.boss // Nested retrieval
```

---

# Object

## Arrays

```javascript
const arr = [1, 2, 3];
```
---

# Object

## Arrays

```javascript
const arr = [1, 'too', { tree: 3 }];
```
--
```javascript
arr.push(4);
```
--
```javascript
arr[1]; // 'two'
arr[3] = 4;
arr.length; // 4    
```

_a collection of indexed properties_

---

# Object

## Arrays
```javascript
var obj = [1, 2, 3];
obj.speed = 5; (!)
```
--
```javascript
obj[1];             // 2
obj.speed           // 5
```
--
```javascript
obj.length;         // 3
obj[80] = true;
obj.length;          // 81 ... huh?
```

---

# Object

Iteration: two kinds of loops

```javascript
var obj = [1, 2, 3];
obj.speed = 5;
```
--
```javascript
// traditional for-loop: ideal for number-indexed arrays
for (var i = 0; i < obj.length; ++i) {
    obj[i];  // 1, 2, 3
}
```
--

```javascript
// for in: ideal for objects
for (var key in obj) {
    obj[key];  // 1, 2, 3, 5
}
```

---

# Typer

Vi kan bruke **typeof**-operatoren for å sjekke type.


    typeof {};          // 'object'
--
    typeof [];          // 'object'     WTF?
--
    typeof 1;           // 'number'
--
    typeof '';          // 'string'
--
    typeof true;        // 'boolean'
--
    typeof minVar;      // 'undefined'
--
    typeof null;        // 'object'     WTF?

---

class: middle center

# Equality

```javascript
1 == 1   // true
1 == '1' // true
1 == 2   // false

// Now things get weird
'' == false       // true
[] == false       // true
null == undefined // true
```

---

class: middle center

# Equality

```javascript
1 === 1 // true
1 === '1' // false
1 === parseInt('1') // true
[] === false // false
null === undefined // false
```

---

class: middle center
# Equality

```javascript
const person = { name: 'David' };
const otherPerson = person;
person === { name: 'David' } // -> false, nyskapt objekt
person === otherPerson // -> true, same referanse
```

---

class: middle center
# Reserved keywords

        break case catch continue debugger default delete
        do else export false finally for function if import
        implements in instanceof interface let new null package private
        protected public return static switch throw true
        try typeof var void while with yield this

---

class: middle center

![](bilder/yay.gif)

# Funksjoner

---

class: middle center
# Funksjoner

```javascript
function() {}
```
--
```javascript
function myFunc() {}
const myFunc = function() {}
myFunc();
```

---

class: middle
# Funksjoner

```javascript
function divide(a, b) {
  return a / b;
}

let average = divide(10,2);
```
--

```javascript
function doStuff(a, b, c, d, e) { ... }
```
--

```javascript
let recur = function(num) {
  ...
  return recur(num - 1);
}
```
---

# Funksjoner

## Arguments

Alle funksjoner har tilgang til _arguments_:

```javascript
function countArguments() {
  return arguments.length;
}

countArguments();              // 0
countArguments('one');         // 1
countArguments('one', 'two');  // 2
```

---

class: middle center
![](bilder/arrow.gif)
# Arrow functions
(ES6)

---

class: middle
# Arrow functions

```javascript
function addOne(x) {
    return x + 1;
}

const addOne = x => x + 1;
```
--
```javascript
const product = (x,y) => x * y;
```
--
```javascript
const modifier = () => 250;
```

---

class: middle
# Arrow functions

```javascript
const bigFunc = (x,y,c) => {
    if (...) return 0;
    else return -1;
};
```

Multilines require _return_

---

class: middle center
# Funksjoner
## Høyereordens funksjoner

---

# Funksjoner
## Høyereordens funksjoner.

Funksjoner som returnerer andre funksjoner:

```javascript
function createFunction() {
  return function(name) {
    console.log('Hello, ' + name);
  };
}
```
--
```javascript
var sayHello = createFunction();
sayHello('World');  // 'Hello World'
```

---

# Funksjoner
## Høyereordens funksjoner.

Funksjoner som returnerer andre funksjoner:

```javascript
const createFunction = () => {
  return name => console.log('Hello, ' + name);
}

const sayHello = createFunction();
sayHello('World');  // 'Hello World'
```

---

# Funksjoner

## Førsteklasses objekter

Funksjoner kan sendes rundt:

```javascript
function doSomething(arr, callback) {
    for (let i = 0; i < arr.length; i++) {
        // do something cool 
    }
    callback(); 
}

const myCallback = function() {
    console.log('Ferdig!')
}
doSomething([1,2], myCallback);
```

---

# Funksjoner

```javascript
array.forEach((element, index, array) => {
    console.log(element);    
});
```
--
```javascript
const logStuff = (element, index, array) => {
    console.log(element);    
}
array.forEach(logStuff);
```

---

class: middle center
# Funksjoner

```javascript
array.map
array.filter
array.reduce
```

---

class: middle center
# Funksjoner

```javascript
array.map(x => x*2)
array.filter
array.reduce
```

---

class: middle center
# Funksjoner

```javascript
array.map
array.filter(x => x > 10)
array.reduce
```

---

class: middle center
# Funksjoner

```javascript
array.map
array.filter
array.reduce((acc, current) => acc + current, 0);
```

---
class: middle center
# Funksjoner

```javascript
array
.filter(x => x.age > 18)
.map(x => x.money)
.reduce((acc, current) => acc + current, 0);
```

--

![](bilder/beermoney.gif)
---

# Funksjoner

## Scope

JavaScript har *funksjonscope* - ikke blokkscope

```javascript
function() {
  i;  // undefined    WTF?

  for (var i = 0; i < 10; i++) {

  }

  i;  // 10
}   
```

---

# Funksjoner

## Scope

Deklarer variabler på toppen av en funksjon!

```javascript
function() {
  var i;

  for (i = 0; i < 10; i++) {

  }

  i;  // 10
} 
```

---

# Funksjoner

## Scope

Funksjoner har tilgang til alt i ytre scope

```javascript
var a = 1;

function doSomething () {
  a;  // 1

  function doMore () {
    a;  // 1
  }
}       
```

---

# Funksjoner

## Scope

Men ikke motsatt

```javascript
function doSomething () {
  var b = 1;

  function doMore () {
    b;  // 1
  }
}
doSomething();

b;  // ReferenceError
```

---

# Funksjoner

## Scope

Husk var - ellers blir variabelen global!

```javascript
function doSomething () {
  c = 1;

  function doMore () {
    c;  // 1
  }
}
doSomething();

c;  // 1
```

---

# Funksjoner

## Closure

Funksjoner kan binde scope:

```javascript
const counter = function() {
  let i = 0;

  return function() {
    return i++;
  };
};

const inc = counter();
inc();  // 0
inc();  // 1
```

---

# Funksjoner

## Closure

Funksjoner kan kalles umiddelbart:

```javascript
var inc = function() {
  var i = 0;

  return function() {
    return i++;
  };
}();  // Note the trailing ()!

inc();  // 0
inc();  // 1
```

---

# Funksjoner

## Closure

Lag moduler med privat tilstand:

```javascript
const lib = {};
lib.module = (function() {

  const privateVariable;

  const privateFunction = function() {};

  return {
    publicProperty: 1,
    privilegedMethod: function(arg) {
      // privateVariable = arg;
    }
  };

})();
```

---

# Funksjoner
## Konstruktører

Når vi kaller en funksjon med nøkkelordet *new*, blir funksjonen en konstruktør:

```javascript
function Person(name) {
  // this === et nyskapt object

  this.name = name;
  // this returneres implisitt
}

const bob = new Person('bob');
const ed = new Person('ed');

ed.name = 'fred';
```

---

# Funksjoner

## Konstruktør

Ooops!

```javascript
function Person(name) {
  this.name = name;
}

var bob = Person('bob');
var ed = new Person('ed');

window.name === 'bob'  // true    WTF?
```

---

class: middle center
# Arv

---

# Arv
## Liten recap: 

* Alt er objekter i javascript
* Typer: function, number, boolean, string

---

# Arv
## Liten recap: 

* Alt er objekter i javascript
* Typer: function, number, boolean, string
* Har egenskaper som de **arver fra prototypen sin**

---

# Arv

## Arver egenskaper fra prototypen sin: 
  
    var navn = 'Erik';
    navn.charAt(0); // 'H'

    // charAt() arves fra String.prototype

---

# Arv

## Vi kan dermed utvide en prototype:

For eksempel **String**: 

    String.prototype.log = function() {
        console.log('Logged string: ' + String(this));
    };

    var navn = 'Erik Wendel'
    navn.log(); // 'Logged string: Erik Wendel'

---

# Arv


Eller **Array**

    if (!Array.prototype.filter) {
      Array.prototype.filter = function(filterFunction) {
        
      }
    }

---

# Arv

## Men ofte lager vi våre egne objekter

Disse arver fra sin prototype

...Og de arver fra Object.prototype

---

# Arv

## Constructor Invocation

Som vi vet: 

    var Person = function(navn) {
        this.navn = navn;
    };

---

# Arv

## Constructor Invocation

Som vi vet: 

    var Person = function(navn) {
        this.navn = navn;
    };

    var erik = new Person('erik');
    erik.navn // 'erik'

---

class: middle center

# Prototype Chain

---

# Arv

    var Person = function(navn, stilling, firma) {
        this.navn = navn;
        this.stilling = stilling;
        this.firma = firma;
        this.hils = function() {
            console.log('Hei, jeg heter ' + this.navn);
        };
    };

---

# Arv 

    var Person = function(navn, stilling, firma) {
        this.navn = navn;
        this.stilling = stilling;
        this.firma = firma;
        this.hils = function() {
            console.log('Hei, jeg heter ' + this.navn);
        };
    };

    var pat = new Person('Pat', 'postmann', 'Posten');
    var nils_arne = new Person('Nils Arne', 'trener', 'Rosenborg');

---

# Arv 

    var Person = function(navn, stilling, firma) {
        this.navn = navn;
        this.stilling = stilling;
        this.firma = firma;
        this.hils = function() {
            console.log('Hei, jeg heter ' + this.navn);
        };
    };

    var pat = new Person('Pat', 'postmann', 'Posten');
    var nils_arne = new Person('Nils Arne', 'trener', 'Rosenborg');

    pat.hils(); // 'Hei, jeg heter Pat'

---

# Arv 

    var Person = function(navn, stilling, firma) {
        this.navn = navn;
        this.stilling = stilling;
        this.firma = firma;
        /* this.hils = function() {
            console.log('Hei, jeg heter ' + this.navn);
        }; */
    };

    var pat = new Person('Pat', 'postmann', 'Posten');
    var nils_arne = new Person('Nils Arne', 'trener', 'Rosenborg');

---

# Arv 

    var Person = function(navn, stilling, firma) {
        this.navn = navn;
        this.stilling = stilling;
        this.firma = firma;
    };

    var pat = new Person('Pat', 'postmann', 'Posten');
    var nils_arne = new Person('Nils Arne', 'trener', 'Rosenborg');

---

# Arv 

    var Person = function(navn, stilling, firma) {
        this.navn = navn;
        this.stilling = stilling;
        this.firma = firma;
    };

    var pat = new Person('Pat', 'postmann', 'Posten');
    var nils_arne = new Person('Nils Arne', 'trener', 'Rosenborg');

    Person.prototype.hils = function() {
        console.log('Hei, jeg heter ' + this.navn);
    };

---

# Arv 

    var Person = function(navn, stilling, firma) {
        this.navn = navn;
        this.stilling = stilling;
        this.firma = firma;
    };

    var pat = new Person('Pat', 'postmann', 'Posten');
    var nils_arne = new Person('Nils Arne', 'trener', 'Rosenborg');

    Person.prototype.hils = function() {
        console.log('Hei, jeg heter ' + this.navn);
    }

    nils_arne.hils(); // 'Hei, jeg heter Nils Arne'
    pat.hils(); // 'Hei, jeg heter Pat'

---

# Arv 

    var Person = function(navn, stilling, firma) {
        this.navn = navn;
        this.stilling = stilling;
        this.firma = firma;
    };

    var pat = new Person('Pat', 'postmann', 'Posten');
    var nils_arne = new Person('Nils Arne', 'trener', 'Rosenborg');

    Person.prototype.hils = function() {
        console.log('Hei, jeg heter ' + this.navn);
    }

    nils_arne.hils(); // 'Hei, jeg heter Nils Arne'
    pat.hils(); // 'Hei, jeg heter Pat'

    pat.katt = 'Miss'; 

---

# Arv 

    var Person = function(navn, stilling, firma) {
        this.navn = navn;
        this.stilling = stilling;
        this.firma = firma;
    };

    var pat = new Person('Pat', 'postmann', 'Posten');
    var nils_arne = new Person('Nils Arne', 'trener', 'Rosenborg');

    Person.prototype.hils = function() {
        console.log('Hei, jeg heter ' + this.navn);
    }

    nils_arne.hils(); // 'Hei, jeg heter Nils Arne'
    pat.hils(); // 'Hei, jeg heter Pat'

    pat.katt = 'Miss'; 

    console.log(pat.katt); // 'Miss'
    console.log(per.katt); // undefined   

---

class: yellow middle center

# Oppgaver - del 3

## Prøv å få <a href='del3/tester.html'>testene</a> til å bli grønne
(oppgavene ligger i 05-javascript intro/del3/oppgave{1-5}.js)

---

class: middle center yellow

  # <a href='../06-dom & jquery/javascript-dom.html'>Neste del</a>


    </textarea>

    <script src='node_modules/remark-bekk/vendor/remark.min.js' type='text/javascript'></script>
    <script type='text/javascript'>
      var slideshow = remark.create({
        ratio: '16:9',
        highlightStyle: 'monokai'
      });
    </script>
  </body>
</html>
